WorldPaint Project Structure
============================

worldpaint/
â”‚
â”œâ”€â”€ ğŸ“± Core App Files
â”‚   â”œâ”€â”€ App.tsx                          # App entry point
â”‚   â”œâ”€â”€ index.js                         # React Native registration
â”‚   â”œâ”€â”€ app.config.ts                    # Expo configuration + iOS permissions
â”‚   â”œâ”€â”€ eas.json                         # EAS build profiles
â”‚   â”œâ”€â”€ package.json                     # Dependencies & scripts
â”‚   â””â”€â”€ expo-env.d.ts                    # Expo TypeScript definitions
â”‚
â”œâ”€â”€ âš™ï¸ Configuration Files
â”‚   â”œâ”€â”€ tsconfig.json                    # TypeScript config
â”‚   â”œâ”€â”€ babel.config.js                  # Babel config
â”‚   â”œâ”€â”€ metro.config.js                  # Metro bundler config
â”‚   â”œâ”€â”€ .editorconfig                    # Editor settings
â”‚   â”œâ”€â”€ .eslintrc.js                     # ESLint rules
â”‚   â”œâ”€â”€ .eslintignore                    # ESLint ignore patterns
â”‚   â”œâ”€â”€ .prettierrc.js                   # Prettier formatting
â”‚   â”œâ”€â”€ .prettierignore                  # Prettier ignore patterns
â”‚   â”œâ”€â”€ .gitignore                       # Git ignore rules
â”‚   â”œâ”€â”€ .gitattributes                   # Git line endings
â”‚   â””â”€â”€ .cursorignore                    # Cursor ignore patterns
â”‚
â”œâ”€â”€ ğŸŒ Environment
â”‚   â””â”€â”€ env.example                      # Environment variable template
â”‚
â”œâ”€â”€ ğŸ“– Documentation
â”‚   â”œâ”€â”€ README.md                        # Main documentation
â”‚   â”œâ”€â”€ ENGINEERING_RULES.md             # Coding standards (authoritative)
â”‚   â”œâ”€â”€ SETUP.md                         # Detailed setup guide
â”‚   â”œâ”€â”€ QUICK_START.md                   # 5-minute quickstart
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md               # Technical overview
â”‚   â”œâ”€â”€ INSTALLATION_CHECKLIST.md        # Verification checklist
â”‚   â”œâ”€â”€ HANDOFF.md                       # Project handoff document
â”‚   â””â”€â”€ PROJECT_TREE.txt                 # This file
â”‚
â”œâ”€â”€ ğŸ¨ Assets
â”‚   â””â”€â”€ assets/
â”‚       â””â”€â”€ README.md                    # Instructions for icon/splash
â”‚
â””â”€â”€ ğŸ’» Source Code
    â””â”€â”€ src/
        â”‚
        â”œâ”€â”€ ğŸ§­ Navigation
        â”‚   â””â”€â”€ navigation/
        â”‚       â””â”€â”€ AppNavigator.tsx     # React Navigation stack setup
        â”‚
        â”œâ”€â”€ ğŸ“± Screens
        â”‚   â””â”€â”€ screens/
        â”‚       â”œâ”€â”€ HomeScreen.tsx       # Start/Stop controls + stats
        â”‚       â””â”€â”€ MapScreen.tsx        # Mapbox map + H3 cells
        â”‚
        â”œâ”€â”€ ğŸ› ï¸ Services
        â”‚   â””â”€â”€ services/
        â”‚       â””â”€â”€ location.ts          # Background GPS tracking service
        â”‚                                 # - TaskManager background task
        â”‚                                 # - Permission handling
        â”‚                                 # - In-memory buffering
        â”‚                                 # - AsyncStorage persistence
        â”‚
        â”œâ”€â”€ ğŸŒ Geospatial
        â”‚   â””â”€â”€ geo/
        â”‚       â””â”€â”€ h3.ts                # H3 hex utilities
        â”‚                                 # - H3 cell to GeoJSON conversion
        â”‚                                 # - Feature collection builder
        â”‚
        â””â”€â”€ ğŸ“¦ Types
            â””â”€â”€ types/
                â””â”€â”€ index.ts             # TypeScript type definitions
                                          # - LocationSample
                                          # - ActivityState
                                          # - Utility converters


Key File Descriptions
=====================

ğŸ“± App.tsx
  - Main app entry point
  - Sets up NavigationContainer
  - Configures StatusBar

ğŸ—ºï¸ MapScreen.tsx
  - Initializes Mapbox with token from env
  - Renders map with street style
  - Shows user location puck
  - Displays sample H3 cell (blue polygon)
  - Camera follows user location

ğŸ  HomeScreen.tsx
  - Start/Stop tracking controls
  - Status indicator (Idle/Recording)
  - Buffered points counter
  - Navigate to Map button
  - Permission request handling

ğŸ“ location.ts
  - Background location tracking service
  - TaskManager background task definition
  - iOS foreground + background permissions
  - GPS buffering (batch of 10 or every 30s)
  - Persistence to AsyncStorage
  - Public API: start, stop, getBufferCount, clearBuffer

ğŸ”· h3.ts
  - H3 cell to GeoJSON Feature converter
  - Properly closes polygon rings
  - Batch conversion to FeatureCollection
  - Mapbox-compatible format

ğŸ§­ AppNavigator.tsx
  - React Navigation native stack
  - Two screens: Home and Map
  - Custom header styling
  - Type-safe navigation

ğŸ“¦ Types (index.ts)
  - LocationSample interface
  - ActivityState interface
  - LocationObject converter
  - Type exports for entire app


Technology Stack
================

Core:
  â€¢ Expo 52.0.0
  â€¢ React Native 0.76.5
  â€¢ TypeScript 5.3.3
  â€¢ React 18.3.1

Navigation:
  â€¢ @react-navigation/native 6.1.9
  â€¢ @react-navigation/native-stack 6.9.17
  â€¢ react-native-screens 4.4.0
  â€¢ react-native-safe-area-context 4.12.0

Maps & Geospatial:
  â€¢ @rnmapbox/maps 10.1.30
  â€¢ h3-js 4.1.0

Location & Storage:
  â€¢ expo-location 18.0.4
  â€¢ expo-task-manager 12.0.3
  â€¢ @react-native-async-storage/async-storage 2.1.0

Development Tools:
  â€¢ ESLint 8.57.0
  â€¢ Prettier 3.1.0
  â€¢ dotenv 16.3.1


Build Profiles (EAS)
====================

development:
  - Dev client build
  - Internal distribution
  - For testing on physical devices

preview:
  - Internal distribution
  - Simulator build
  - For QA/review

production:
  - App Store build
  - Full optimizations
  - Release-ready


NPM Scripts
===========

pnpm start          Start Metro bundler
pnpm ios            Run in iOS Simulator
pnpm prebuild       Generate native projects
pnpm lint           Run ESLint
pnpm format         Format with Prettier


Environment Variables
=====================

Local (.env):
  EXPO_PUBLIC_MAPBOX_TOKEN=pk_...

EAS Secrets:
  MAPBOX_DOWNLOADS_TOKEN=sk_...


Git Status
==========

Not yet initialized. Run:
  git init
  git add .
  git commit -m "Initial commit: WorldPaint MVP"


Next Steps
==========

1. Install dependencies: pnpm install
2. Set up .env file with Mapbox token
3. Run prebuild: pnpm prebuild
4. Launch in Simulator: pnpm ios
5. Test background tracking
6. Read ENGINEERING_RULES.md
7. Start implementing Phase 2 features


Definition of Done âœ…
====================

âœ… Expo project with TypeScript
âœ… Background location tracking (iOS)
âœ… Mapbox map with user location
âœ… Sample H3 cell rendering
âœ… Start/Stop UI controls
âœ… AsyncStorage buffering
âœ… Dev client build profile
âœ… ENGINEERING_RULES.md
âœ… Comprehensive documentation
âœ… Clean, modular architecture
âœ… Ready to run locally


Status: MVP COMPLETE ğŸ‰
========================

The WorldPaint app is production-lean, fully documented,
and ready to run on iOS (Simulator and device).

Read QUICK_START.md to get running in 5 minutes!

